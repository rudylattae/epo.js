!function(e){function t(t,o){if(!t||""===t)throw new Error("A tote must have a non-empty namespace");var o=o||{},u=o.storageAdapter||e.localStorage,a=o.index||r(t,u);return n(t,u,a)}function n(e,t,n){function r(t){return e+"-"+t}function u(){for(var e=n.all(),o=0,u=e.length;u>o;o++)key=e[o],t.removeItem(r(key));n.clear()}var a={setItem:function(e,o){n.add(e),t.setItem(r(e),JSON.stringify(o))},getItem:function(e){var n=t.getItem(r(e));return n&&"undefined"===n?n:JSON.parse(n)},removeItem:function(e){t.removeItem(r(e)),n.remove(e)},all:function(e){for(var t=[],r=n.all(),u=0,a=r.length,i=o(e);a>u;u++)key=r[u],t.push(e?i(key,this.getItem(key)):this.getItem(key));return t},clear:function(){u()},key:function(e){return n.getKeyAt(e)},length:function(){return n.length()}};return a.set=a.setItem,a.get=a.getItem,a.remove=a.removeItem,a}function r(e,t){function n(){var n=t.getItem(e);o=n&&n.split(",")||[]}function r(){t.setItem(e,o.join(","))}var o=[];return{add:function(e){o.indexOf(e)<0&&(o.push(e),r())},remove:function(e){var t=o.indexOf(e);-1!==t&&o.splice(t,1),r()},all:function(){return o},clear:function(){t.removeItem(e),n()},length:function(){return o.length},getKeyAt:function(e){return o[e]}}}function o(e){return e&&e.compact?u.asCompact:e&&e.kvp?u.asKvp:null}var u={asCompact:function(e,t){var n={};return n[e]=t,n},asKvp:function(e,t){return{key:e,value:t}}};t.createIndex=r,t.createStorageWrapper=n,e.tote=t}(window);